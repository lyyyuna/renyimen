# 技术选型文档

## 选型过程

### 初始方案对比

在项目初期，我们考虑了两个主要的技术栈方案：

#### 方案一：JavaScript + Electron + Vue
- **前端框架**：Vue.js 3.x
- **桌面应用**：Electron
- **地图集成**：高德地图 JavaScript API
- **语音识别**：Web Speech API
- **AI 集成**：HTTP API 调用

**优势**：
- 跨平台兼容性好
- 前端生态丰富，组件库完善
- 地图 API 集成方便，可直接使用高德地图组件
- 开发效率高，UI 界面灵活

**劣势**：
- 应用体积较大（Electron 运行时）
- 内存占用相对较高
- 需要处理 Electron 安全性问题
- 与 AI 服务集成相对复杂

#### 方案二：Python + PyQt/PySide
- **GUI 框架**：PySide6
- **AI 集成**：Claude CLI + MCP 协议
- **语音识别**：speech_recognition + 七牛云 ASR
- **地图服务**：API 调用 + 浏览器跳转
- **异步处理**：asyncio + QThread

**优势**：
- Python 生态丰富，AI 相关库完善
- MCP 协议支持良好
- 团队技术储备充分
- 轻量级应用，资源占用少
- 与 Claude AI 集成简单直接

**劣势**：
- GUI 界面相对简单
- 跨平台打包相对复杂
- 地图显示需要依赖浏览器

### 决策转折点

#### 需求重新理解
经过仔细分析项目需求，我们发现：
- **核心目标**：让 AI 智能操作计算机，而非开发传统应用
- **交互方式**：自然语言 + 语音输入为主
- **输出形式**：直接操作浏览器打开地图导航

这一理解转变让我们重新审视技术选型的优先级。

#### 关键决策因素

1. **AI 集成优先级**
   - 项目的核心是 AI 能力，需要与 Claude 深度集成
   - MCP 协议是 AI Agent 的标准接口
   - Python 在 AI 生态中有天然优势

2. **简化架构原则**
   - 避免重复造轮子（地图显示）
   - 利用现有成熟方案（浏览器 + 地图网页版）
   - 专注核心能力（自然语言解析 + 智能操作）

3. **团队技术匹配**
   - 团队在 Python 开发方面有多年经验
   - 对 AI 相关库和框架熟悉
   - 快速原型开发和迭代能力强

### 最终选型：Python + PySide6

#### 核心技术栈

**前端界面**
- **PySide6**：Qt 的 Python 绑定，提供现代化 GUI 组件
- **异步处理**：QThread + asyncio 避免界面阻塞
- **响应式设计**：信号槽机制实现组件间通信

**AI 集成**
- **Claude CLI**：Anthropic 官方命令行工具
- **MCP 协议**：Model Context Protocol，AI Agent 标准接口
- **自定义 MCP 服务器**：实现导航相关工具集

**语音识别**
- **七牛云 ASR**：实时语音识别（WebSocket）
- **Google Speech Recognition**：本地备用方案
- **唤醒词检测**：自然语言预处理

**地图服务**
- **高德地图 API**：地理编码和路径规划
- **百度地图 API**：备用地图服务
- **浏览器集成**：自动打开导航页面

**开发工具**
- **uv**：现代 Python 包管理器
- **异步编程**：asyncio 处理并发任务
- **配置管理**：环境变量 + JSON 配置

#### 架构优势

1. **轻量高效**
   - 原生应用性能
   - 低内存占用
   - 快速启动时间

2. **AI 原生**
   - 与 Claude 无缝集成
   - MCP 协议标准化
   - 易于扩展 AI 能力

3. **模块化设计**
   - 松耦合组件
   - 易于测试和维护
   - 支持功能渐进增强

4. **用户体验**
   - 简洁直观的界面
   - 流畅的语音交互
   - 智能的自然语言理解

### 技术风险与应对

#### 潜在风险
1. **跨平台兼容性**：PySide6 在不同系统的表现差异
2. **依赖管理**：Python 环境和包版本冲突
3. **AI 服务稳定性**：Claude API 调用限制和错误处理

#### 应对措施
1. **测试覆盖**：多平台测试和兼容性验证
2. **环境隔离**：使用 uv 管理虚拟环境
3. **容错设计**：多重备用方案和错误恢复机制

### 总结

通过从"开发应用"到"AI 操作计算机"的理念转变，我们选择了更符合项目本质的技术方案。Python + PySide6 的组合不仅发挥了团队的技术优势，更重要的是为 AI 能力的发挥提供了最佳的技术基础。

这一选型决策体现了我们对项目核心价值的准确把握：**让 AI 成为用户的智能助手，而非仅仅提供一个功能丰富的应用程序**。